# Структура бинарника mp3-файла
**Пояснения к системам записям чисел в различных системах счисления:**  
```
Дабы различать приведённые здесь числа в различных системах счисления, введём некоторые обозначения для различных систем:  
с суффиксом h пишется число в 16-ой системе (16h), без всего пишутся числа в 10-ой системе (13), после стрелочки ->  
пишется значение этого элемента/блока/байта (в "кавычках" пишутся символы кодировки, без кавычек - числовое значение элемента,  
с приставкой 0x - двоичное (0x1001 = 9)).  
Также различные системы счисления будут написаны разными шрифтами.  
```
  
**Пояснения к описанию структуры mp3-файла:**  
```
В начале пояснения к каждому блоку пишется занимаемый им объём, затем, после -> пишется значение (если известно),  
иногда для удобства оно переводится  
в другие системы счисления. Затем, после | пишется пояснение, примеры и комментарии к блоку (могут занимать и несколько строк).  
Вложенные блоки разделены табуляцией.  
```
  
**Небольшие пояснения к структуре mp3-файла:**
```
Анализ файла проводится с помощью 010 Editor.  
В каждой строке 8 байт;  
Байты нумеруются в 16-ой системе (1 строка - 0:0000, 2 - 0:0008, 3 - 0:0010 ...);  
Объём памяти под каждый объект также в 16-ой системе (1h - 1 байт, Bh - 11 байт).  
Иногда после указания объёма в 16-ой системе будет перевод в 10-ую: 10h=16Б или А2h=162Б.  
15400h = 0*16^0 + 0*16^1 + 4*16^2 + 5*16^3 + 1*16^4 = 87040.  
Каждый символ кодировки - 1 байт (8 бит), в строке 8 байт.  
1h = 1; 2h = 2; 3h = 3; 4h = 4; 5h = 5; 6h = 6Б; 7h = 7; 8h = 8; 9h = 9; Ah = 10; Bh = 11; Ch = 12; Dh = 13; Eh = 14; Fh = 15.  
0x01 = 1; 0x11011 = 27.  
```
  
## **Структура mp3-файла:**  

*В начале и конце mp3 файлов идут теги id3 (ID3 (от англ. Identify a mp3) — формат метаданных, наиболее часто используемый в звуковых файлах в формате mp3).*  
*copyright https://github.com/Strltz/audio_steganography*  
*В начале идёт id3v2_tag, имеет переменную длину и размещается в начале файла, что позволяет поддерживать потоковое воспроизведение.*  
**id3v2_tag**: ~15400h или 15000h | *здесь и хранятся сведения о названии, авторе, жанре и т.д., а также некоторая другая информация.*  
* **hdr**: ~Ah=10Б | *hdr - header - заголовок*  
* * **head**: ~3h -> "ID3" |  
* * **ver_major**: 1h -> 3 | *версия*  
* * **ver_revision**: 1h -> 0 | *субверсия*  
* * **flags**: 1h | *флаги*  
* * * ...  
* * **size**: 4h -> ~87030 | *длина id3v2_tag в байтах (а точнее разница длин id3v2_tag и hdr, то есть длина id3v2_tag без его заголовка)*  
* * * **raw**: 4h -> ~ 0h 5h 27h 76h | *особенность - каждый старший бит всеглабайта равен 0 и не учитывается при расчёте: пример: читаем эти 4 байта как один целый*
*(то есть сливаем 4 двоичных числа в одно, как они идут по порядку), выкидывая старший бит в каждом байте: raw[] = `0x00000000 0x00000101 0x00100111 0x01110110` =>*
*`0x 0000000 0000101 0100111 1110110` => `0x10101001111110110` = 87030*  
